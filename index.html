<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthQuest - Holistic Fitness RPG</title>
    <meta name="description" content="Transform your health journey into an epic adventure.">
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#4ade80">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Ctext y='24' font-size='24'%3EðŸŒ±%3C/text%3E%3C/svg%3E">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/habit-modal.css">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="loading-logo">ðŸŒ±</div>
                <h2>HealthQuest</h2>
                <p id="loading-message">Loading your adventure...</p>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
            </div>
        </div>

        <!-- Main App Root -->
        <div id="app-root" class="app-root" style="display: none;"></div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container"></div>
    </div>

    <!-- Core Configuration (Fixed version without process.env) -->
    <script src="js/core/config.js"></script>
    <script src="js/core/constants.js"></script>
    
    <!-- Core Systems -->
    <script src="js/core/eventbus.js"></script>
    <script src="js/core/storage.js"></script>
    
    <!-- Models (only existing ones) -->
    <script src="js/models/player.js"></script>
    <script src="js/models/quest.js"></script>
    <script src="js/models/achievement.js"></script>
    
    <!-- Game Systems -->
    <script src="js/systems/quest-system.js"></script>
    <script src="js/systems/achievement-system.js"></script>
    <script src="js/systems/analytics-system.js"></script>
    <script src="js/systems/notification-system.js"></script>
    <script src="js/systems/wahd-system.js"></script>
    <script src="js/systems/streak-system.js"></script>
    <script src="js/systems/habit-logging-system.js"></script>
    
    <!-- UI Components (existing ones) -->
    <script src="js/ui/components/toast.js"></script>
    <script src="js/ui/components/celebration-modal.js"></script>
    <script src="js/ui/components/account-modal.js"></script>
    <script src="js/ui/components/onboarding-modal.js"></script>
    <script src="js/ui/components/habit-log-modal.js"></script>
    
    <!-- UI Manager -->
    <script src="js/ui/ui-manager.js"></script>
    
    <!-- Main Game Manager -->
    <script src="js/game.js"></script>
    
    <!-- App Initialization -->
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('ServiceWorker registered'))
                    .catch(err => console.log('ServiceWorker registration failed:', err));
            });
        }
    </script>
    
    <!-- Stub for missing models -->
    <script>
        // Temporary stubs for missing model files
        if (typeof Habit === 'undefined') {
            class Habit {
                constructor(data = {}) {
                    Object.assign(this, data);
                }
            }
            window.Habit = Habit;
        }
        
        if (typeof Meal === 'undefined') {
            class Meal {
                constructor(data = {}) {
                    Object.assign(this, data);
                }
            }
            window.Meal = Meal;
        }
        
        if (typeof Activity === 'undefined') {
            class Activity {
                constructor(data = {}) {
                    Object.assign(this, data);
                }
            }
            window.Activity = Activity;
        }
        
        if (typeof Sleep === 'undefined') {
            class Sleep {
                constructor(data = {}) {
                    Object.assign(this, data);
                }
            }
            window.Sleep = Sleep;
        }
        
        if (typeof Mood === 'undefined') {
            class Mood {
                constructor(data = {}) {
                    Object.assign(this, data);
                }
            }
            window.Mood = Mood;
        }
    </script>
</body>
</html>

