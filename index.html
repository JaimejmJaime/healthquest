<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; font-src 'self' data:; object-src 'none'; media-src 'self'; frame-src 'none';">
    <title>HealthQuest - Holistic Fitness RPG</title>
    <meta name="description" content="Transform your health journey into an epic adventure. Level up through balanced habits across nutrition, movement, recovery, and mindfulness.">
    
    <!-- PWA Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#4ade80">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="HealthQuest">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' fill='%234ade80' rx='4'/%3E%3Ctext x='16' y='22' font-family='Arial' font-size='16' text-anchor='middle' fill='white'%3EðŸŒ±%3C/text%3E%3C/svg%3E">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/layouts.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <div id="app" class="app-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-content">
                <div class="loading-logo">ðŸŒ±</div>
                <h2>HealthQuest</h2>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
                <p id="loading-message">Loading your adventure...</p>
            </div>
        </div>

        <!-- Main App Content (populated by JavaScript) -->
        <div id="app-root" style="display: none;">
            <!-- Hero Section -->
            <header id="hero-section" class="hero-section"></header>
            
            <!-- Navigation -->
            <nav id="navigation" class="nav-tabs"></nav>
            
            <!-- Content Area -->
            <main id="content" class="content-area"></main>
            
            <!-- Floating Action Button -->
            <button id="fab" class="fab" aria-label="Quick Actions">
                <span class="fab-icon">âž•</span>
            </button>
        </div>

        <!-- Toast Container -->
        <div id="toast-container" class="toast-container" aria-live="polite"></div>
        
        <!-- Modal Container -->
        <div id="modal-container" class="modal-container" aria-hidden="true"></div>
        
        <!-- Quick Actions Menu -->
        <div id="quick-actions" class="quick-actions" style="display: none;"></div>
    </div>

    <!-- Core Scripts -->
    <script src="js/core/config.js"></script>
    <script src="js/core/constants.js"></script>
    <script src="js/core/eventbus.js"></script>
    <script src="js/core/storage.js"></script>
    
    <!-- Models -->
    <script src="js/models/player.js"></script>
    <script src="js/models/quest.js"></script>
    <script src="js/models/achievement.js"></script>
    <script src="js/models/habit.js"></script>
    <script src="js/models/meal.js"></script>
    <script src="js/models/activity.js"></script>
    <script src="js/models/sleep.js"></script>
    <script src="js/models/mood.js"></script>
    
    <!-- Systems -->
    <script src="js/systems/quest-system.js"></script>
    <script src="js/systems/achievement-system.js"></script>
    <script src="js/systems/analytics-system.js"></script>
    <script src="js/systems/notification-system.js"></script>
    <script src="js/systems/wahd-system.js"></script>
    <script src="js/systems/streak-system.js"></script>
    
    <!-- UI Components -->
    <script src="js/ui/components/hero.js"></script>
    <script src="js/ui/components/navigation.js"></script>
    <script src="js/ui/components/avatar.js"></script>
    <script src="js/ui/components/progress-bar.js"></script>
    <script src="js/ui/components/quest-card.js"></script>
    <script src="js/ui/components/achievement-card.js"></script>
    <script src="js/ui/components/stat-card.js"></script>
    <script src="js/ui/components/chart.js"></script>
    
    <!-- UI Views -->
    <script src="js/ui/views/dashboard.js"></script>
    <script src="js/ui/views/quests.js"></script>
    <script src="js/ui/views/progress.js"></script>
    <script src="js/ui/views/nutrition.js"></script>
    <script src="js/ui/views/movement.js"></script>
    <script src="js/ui/views/recovery.js"></script>
    <script src="js/ui/views/mindfulness.js"></script>
    <script src="js/ui/views/achievements.js"></script>
    <script src="js/ui/views/settings.js"></script>
    
    <!-- UI Modals -->
    <script src="js/ui/modals/meal-modal.js"></script>
    <script src="js/ui/modals/activity-modal.js"></script>
    <script src="js/ui/modals/sleep-modal.js"></script>
    <script src="js/ui/modals/mood-modal.js"></script>
    <script src="js/ui/modals/celebration-modal.js"></script>
    <script src="js/ui/modals/onboarding-modal.js"></script>
    
    <!-- UI Manager -->
    <script src="js/ui/ui-manager.js"></script>
    <script src="js/ui/toast.js"></script>
    <script src="js/ui/modal.js"></script>
    
    <!-- Main Game -->
    <script src="js/game.js"></script>
    <script src="js/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(registration => console.log('ServiceWorker registered'))
                    .catch(err => console.log('ServiceWorker registration failed'));
            });
        }
    </script>
</body>
</html>
